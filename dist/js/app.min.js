"use strict";var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};angular.module("app",["app.core","app.biz"]),function(){function e(e,n,o){n.when("","/").when("/","/login").otherwise("/login"),n.otherwise("/")}angular.module("app.core",["core.shell","core.start","ui.router","ngMaterial","ngMessages","ngSanitize","ngStorage","biz.services","firebase"]).config(e),e.$inject=["$stateProvider","$urlRouterProvider","appRoutes"]}(),function(){var e=angular.module("core.start",[]);angular.injector(["ng"]).get("$http").get("/app/core/start/settings.json").then(function(n){var o=n.data.config;e.constant("config",o),e.constant("appRoutes",n.data.routes);var t={apiKey:o.apiKey,authDomain:o.authDomain,databaseURL:o.databaseURL,projectId:o.projectId,storageBucket:o.storageBucket,messagingSenderId:o.messagingSenderId};firebase.initializeApp(t)},function(e){console.log("It was not possible to load the configuration file.")}).then(function(){angular.element(document).ready(function(){angular.bootstrap(document,["app"])})})}(),angular.module("core.shell",["ui.router"]),function(){function e(e,n,o){var t=this;t.subscribe=function(n,o){var t=e.$on("core-modal-notifying-service-event",o);n.$on("$destroy",t)},t.notify=function(){e.$emit("core-modal-notifying-service-event")},t.close=function(){n.hide(alert,"cancel"),alert=void 0},t.show=function(e){var o=e.options;return t.modalInstance=n.show({templateUrl:o.templateUrl,controller:o.controller,controllerAs:"vm",locals:{modalInfo:e.data}}),t.modalInstance};var i=function(e){return e.type="dialog",t.modalInstance=n.show({templateUrl:"app/core/modal/core.modal.html",controller:"CoreModalController",controllerAs:"vm",locals:{modalInfo:e}}),t.modalInstance};t.info=function(e,n,o){return i({message:e,title:n,icon:"fa fa-info",buttons:[{name:"ok",text:"Ok",callback:o,class:"md-raised md-primary"}]})},t.confirm=function(e,n,o,t){return i({message:e,title:n,icon:"fa fa-question",buttons:[{name:"yes",text:"yes",callback:o},{name:"no",text:"no",callback:t}]})},t.err=function(e,n,o){return i({message:e,title:n,icon:"fa fa-warning",buttons:[{name:"gotit",text:"Got It!",callback:o}]})}}angular.module("app.core").service("coreModal",e),e.$inject=["$rootScope","$mdDialog","config"]}(),function(){function e(e,n,o,t,i,a){n.vm={};var l=n.vm,r=function(){var e=[{name:"ok",class:"md-raised md-primary",icon:"fa fa-info",text:"ok",callback:void 0},{name:"gotit",class:"md-raised",icon:"fa fa-warning",text:"ok",callback:void 0},{name:"cancel",class:"md-raised md-warn",icon:"fa fa-sign-out",text:"cancel",callback:void 0},{name:"warning",class:"md-raised md-warn",icon:"fa fa-bell",text:"warning",callback:void 0},{name:"danger",class:"md-raised md-warn",icon:"fa fa-warning",text:"warning",callback:void 0},{name:"yes",class:"md-raised md-primary",icon:"fa fa-thumbs-up",text:"yes",callback:void 0},{name:"no",class:"md-raised md-warn",icon:"fa fa-thumbs-down",text:"no",callback:void 0}],n=i.buttons;l.title=i.title,l.message=i.message,l.icon=i.icon,l.buttons=n.map(function(n){var o=e.find(function(e){return e.name===n.name});return n.class=o.class,n.icon=o.icon,n})};void 0!==(void 0===i?"undefined":_typeof(i))&&(l.modalInfo=i,"dialog"===i.type&&r()),l.buttonClick=function(e){e.callback&&e.callback(),t.hide()},n.ok=function(){t.hide()},n.cancel=function(){t.hide("cancel")},n.goHome=function(){t.hide("cancel"),o.go(a.defaultView)},l.cancel=n.cancel,l.ok=n.ok,l.close=n.cancel,l.goHome=n.goHome}angular.module("app.core").controller("CoreModalController",e),e.$inject=["$timeout","$scope","$state","$mdDialog","modalInfo","config"]}(),angular.module("app.biz",["biz.services","biz.cliente","biz.user"]),angular.module("biz.services",[]),angular.module("biz.cliente",[]),function(){function e(e,n,o,t){var i={add:function(e,o){return n(function(n,t){var i={name:e,idade:o,views:0,closed:0,dismissed:0};l.push(i),n(!0)})},addView:function(e){l.find(function(n){return e.name==n.name}).views++},addClose:function(e){l.find(function(n){return e.name==n.name}).closed++},getList:function(){return l?new Promise(function(e,n){e(l)}):new Promise(function(e,n){var o=[{name:"Marieta Severo",idade:89,views:0,closed:0,dismissed:0},{name:"Suzanna Vieira",idade:99,views:0,closed:0,dismissed:0},{name:"Graciliane Feijoa",idade:30,views:0,closed:0,dismissed:0}];t.set(a,o),e(o)})},getTitleList:function(){return n.when("Tela de Listagem de Clientes")}},a="cliente-list",l=t.get(a);return i}angular.module("biz.services").factory("bizClienteService",e),e.$inject=["$http","$q","config","localdb"]}(),function(){function e(e,n,o,t){e.vm={};var i=e.vm;i.title="Clientes",t.islogged(),o.getList().then(function(e){i.list=e}),i.open=function(t){o.addView(t);var i={options:{controller:"BizClienteDetailsController",templateUrl:"app/biz/cliente/cliente.details.html"},data:t};n.subscribe(e,function(e,n){console.log("closed with item update")});n.show(i)},i.info=function(e){n.info("Hello, this is an info box","Info Box",function(){console.log("the ok button from the info box has been clicked")})},i.err=function(e){n.err("Wow, this is bad. System just popped an error","Error Box",function(){console.log("the Got It button from the error box has been clicked")})},i.delete=function(e){n.confirm("Danger, do you confirm this operation ?","Confirmation Box",function(){console.log("the ok button from the confirmation box has been clicked")},function(){console.log("cancel button from the confirmation box has been chosen instead")})}}angular.module("biz.cliente").controller("BizClienteListController",e),e.$inject=["$scope","coreModal","bizClienteService","LoginService"]}(),function(){function e(e,n,o,t,i){function a(){i.addClose(o),o.update=5,t.notify(l.item),t.close()}e.vm={};var l=e.vm;l.rawTitle="some title",l.item=o,l.title=l.item.name,l.close=a}angular.module("biz.cliente").controller("BizClienteDetailsController",e),e.$inject=["$scope","$filter","modalInfo","coreModal","bizClienteService"]}(),function(){function e(e){var n={parent:"shell",name:"cliente",url:"cliente",component:"cliente",resolve:{}};e.state(n)}angular.module("biz.cliente").component("cliente",{templateUrl:"./app/biz/cliente/cliente.list.html",controller:"BizClienteListController",bindings:{}}).config(e),e.$inject=["$stateProvider"]}(),function(){function e(e){var n={parent:"shell",name:"add",url:"add",component:"add",resolve:{}};e.state(n)}angular.module("biz.cliente").component("add",{templateUrl:"./app/biz/cliente/cliente.add.html",controller:"BizClienteAddController",bindings:{}}).config(e),e.$inject=["$stateProvider"]}(),function(){function e(e,n,o,t){e.vm={};var i=e.vm;i.title="Clientes",t.islogged(),o.getList().then(function(e){i.list=e}),i.save=function(){i.success=!1,o.add(i.name,i.age).then(function(e){n.info("Cliente cadastrado","Sucesso!",function(){console.log("the ok button from the info box has been clicked")}),i.name="",i.age=""}).catch(function(e){})}}angular.module("biz.cliente").controller("BizClienteAddController",e),e.$inject=["$scope","coreModal","bizClienteService","LoginService"]}(),angular.module("biz.user",[]),function(){function e(e,n,o){return{getPeople:function(){return e.get("/api/people").then(function(e){return e.data}).catch(function(e){return exception.catcher("XHR Failed for getPeople")(e)})},getMessageCount:function(){return n.when(72)}}}angular.module("biz.services").factory("bizUserService",e),e.$inject=["$http","$q","config"]}(),function(){function e(e,n,o){e.vm={};var t=e.vm;t.title=n.title,t.busyMessage="shell says system loading"}angular.module("core.shell").controller("ShellController",e),e.$inject=["$scope","config","$state"]}(),function(){function e(e){var n={name:"shell",url:"/",component:"shell",redirectTo:"login",resolve:{}};e.state(n)}angular.module("core.shell").component("shell",{templateUrl:"./app/core/shell/shell.html",controller:"ShellController",bindings:{}}).config(e),e.$inject=["$stateProvider"]}(),function(){function e(e,n){var o=this,t="_",i={isLoggedIn:!0,username:"jp"};i.isLoggedIn&&(t+=i.username);var a=function(e){return e+t};return o.get=function(n,o){return o&&(n=a(n)),e[n]},o.set=function(n,o,t){t&&(n=a(n)),e[n]=o},o}angular.module("app.core").service("localdb",e),e.$inject=["$localStorage","config"]}(),function(){function e(e,n,o,t,i){this.loginGoogle=function(){return o(function(e,n){var o=new firebase.auth.GoogleAuthProvider;firebase.auth().signInWithPopup(o).then(function(n){var o=n.credential.accessToken,t=n.user,i={name:t.displayName,token:o,photo:t.photoURL};e(i)}).catch(function(e){e.code,e.message,e.email,e.credential;n(e)})})},this.loginEmail=function(n,t){var a=e();return o(function(e,o){a.$signInWithEmailAndPassword(n,t).then(function(n){var o={name:"guest",token:n.uid,photo:i.urlimg+"/images/profile.jpeg"};e(o)}).catch(function(l){"auth/user-not-found"==l.code?a.$createUserWithEmailAndPassword(n,t).then(function(n){var o={name:"guest",token:n.uid,photo:i.urlimg+"/images/profile.jpeg"};e(o)}).catch(function(e){console.error("Error: ",e),o(e.message)}):(console.error("Authentication failed:",l),o(l.message))})})},this.logout=function(){n.set("loggeduser","")},this.islogged=function(){var e=n.get("loggeduser");if(e&&""!=e)return!0;t.location.href="/"}}angular.module("app.core").service("LoginService",e),e.$inject=["$firebaseAuth","localdb","$q","$window","config"]}(),function(){function e(e,n,o,t,i){e.vm={};var a=e.vm;a.loginGoogle=function(){n.loginGoogle().then(function(e){i.set("loggeduser",e),o.go("cliente")}).catch(function(e){console.log(e)})},a.loginEmail=function(){n.loginEmail(a.email,a.password).then(function(e){i.set("loggeduser",e),o.go("cliente")}).catch(function(e){a.loginForm.password.$setValidity("invalid_password",!1),t.info(e,"Opa!",function(){console.log("the ok button from the info box has been clicked")})})}}angular.module("app.core").controller("LoginController",e),e.$inject=["$scope","LoginService","$state","coreModal","localdb"]}(),function(){function e(e){var n={name:"login",url:"/login",component:"login",resolve:{}};e.state(n)}angular.module("app.core").component("login",{templateUrl:"./app/core/login/login.html",controller:"LoginController",bindings:{}}).config(e),e.$inject=["$stateProvider"]}(),function(){function e(e,n,o,t){e.vm={};var i=e.vm;i.go=function(e){o.go(e)},i.$onInit=function(){i.summary={show:!1}},i.closeSidebar=function(e){e.stopPropagation(),n("sidebar").close()},i.toggleSidebar=function(e){e.stopPropagation(),n("sidebar").toggle()},function(){var e=t.get("loggeduser"),n=e.name.split(" ");i.name=n[0],i.photo=e.photo}()}angular.module("core.shell").controller("NavbarController",e),e.$inject=["$scope","$mdSidenav","$state","localdb"]}(),function(){angular.module("core.shell").component("navbar",{templateUrl:"./app/core/shell/navbar/navbar.html",controller:"NavbarController",bindings:{}})}(),function(){function e(e,n,o,t,i){e.vm={};var a=e.vm;a.go=function(e){t.go(e)},a.logout=function(){o.logout(),t.go("login")},a.closeSidebar=function(e){e.stopPropagation(),n("sidebar").close()},function(){var e=i.get("loggeduser"),n=e.name.split(" ");a.name=n[0],a.photo=e.photo}()}angular.module("core.shell").controller("SidebarController",e),e.$inject=["$scope","$mdSidenav","LoginService","$state","localdb"]}(),function(){angular.module("core.shell").component("sidebar",{templateUrl:"./app/core/shell/sidebar/sidebar.html",controller:"SidebarController",bindings:{}})}();